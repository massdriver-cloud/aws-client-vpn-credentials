schema: draft-07
name: aws-client-vpn-credentials
description: Creates private key and certificate for authentication to a aws-client-vpn-endpoint bundle.
source_url: github.com/massdriver-cloud/aws-client-vpn-credentials
access: private
type: infrastructure

steps:
  - path: src
    provisioner: opentofu

params:
  examples: []
  required:
    - validity_hours
  properties:
    validity_hours:
      type: integer
      title: Certificate Validity Length
      description: How long the client certificate will be valid for.

connections:
  required:
    - endpoint
  properties:
    endpoint:
      $ref: lacore/aws-client-vpn-endpoint

artifacts:
  required:
    - credential
  properties:
    credential:
      $ref: lacore/aws-client-vpn-credential

ui:
  ui:order:
    - validity_hours
    - '*'
  validity_hours:
    ui:field: conversionFieldTime
    unit: Hours
